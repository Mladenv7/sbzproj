package com.sbz;

import com.sbz.proj.model.*;

global java.util.logging.Logger LOGGER

rule "Dobio sam rucne keceve"
    when
        $kec: Player(card1.rank.rank == 1 && card2.rank.rank == 1)
    then
        //System.out.println("dobio sam rucne keceve");
        LOGGER.info("AAAAAAAALLLLLLLLLLLOOOOOOOOOOO");
        TableState state = new TableState();
        state.setCurrentStage(StageName.FLOP);
        insert(state);
end


rule "THE FLOP"
    when
        $state: TableState(currentStage == StageName.FLOP)
    then
        //System.out.println("THE FLOP");
        LOGGER.info("AAAAAAAALLLLLLLLLLLOOOOOOOOOOO iz flopa");
end





rule "HIGH_CARD"
    lock-on-active true
    when
        $possibility: Possibility(
            pokerHand == PokerHand.UNKNOWN,
            howManyWithRank(card1.rank) == 1,
            howManyWithRank(card2.rank) == 1,
            howManyWithRank(card3.rank) == 1,
            howManyWithRank(card4.rank) == 1,
            howManyWithRank(card5.rank) == 1,
            sameSuit() == false,
            $pokerHand: pokerHand != PokerHand.STRAIGHT
        )
    then
        modify($possibility){pokerHand = PokerHand.HIGH_CARD}
end