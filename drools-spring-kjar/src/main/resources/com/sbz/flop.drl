package com.sbz;

import com.sbz.proj.model.*;

global java.util.logging.Logger LOGGER

rule "Raise because you have royal flush"
    lock-on-active true
    agenda-group "flop"
	when
        $state: TableState($currentStage: currentStage == StageName.FLOP)
        $possibility: Possibility(
            $pokerHand: pokerHand == PokerHand.ROYAL_FLUSH
        )
    then
        modify($state){
            getPlayers().get(0).getAction().set(0, Action.RAISE);
        }
end

rule "Raise because you have good combination"
    lock-on-active true
    agenda-group "flop"
	when
        $state: TableState($currentStage: currentStage == StageName.FLOP)
        $possibility: Possibility(
            pokerHand != PokerHand.ROYAL_FLUSH,
            $pokerHand: pokerHand,
            pokerHand.strength >= 5
        )
    then
        modify($state){
            getPlayers().get(0).getAction().set(0, Action.RAISE);
        }
        LOGGER.info("You have " + $pokerHand.name());
end

rule "Call because you have somewhat combination"
    no-loop
    agenda-group "flop"
	when
        $state: TableState($currentStage: currentStage == StageName.FLOP)
        $possibility: Possibility(
            $pokerHand: pokerHand,
            pokerHand.strength < 5
        )
    then
        modify($state){
            getPlayers().get(0).getAction().set(0, Action.CALL);
        }
        LOGGER.info("You have " + $pokerHand.name());
end